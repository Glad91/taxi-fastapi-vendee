# Tests pour l'API Taxi Vend√©e 2025 - PRODUCTION RENDER
# URL de production sur Render.com
# Utiliser avec IntelliJ IDEA, VS Code REST Client ou similaire

### Variables d'environnement PRODUCTION
@baseUrl = https://tarif-taxi-vendee.onrender.com
@timeout = 30000  # 30 secondes pour le premier r√©veil


### 1. Test de r√©veil (peut prendre 30s si l'app est endormie)
GET {{baseUrl}}/verifier-sante
Accept: application/json

### 2. Deuxi√®me test de sant√© (doit √™tre rapide maintenant)
GET {{baseUrl}}/verifier-sante
Accept: application/json

### 3. R√©cup√©ration des tarifs officiels
GET {{baseUrl}}/tarifs
Accept: application/json

### 4. Estimation rapide - Course courte jour aller-retour
GET {{baseUrl}}/estimation-rapide?distance_km=5&aller_retour=true
Accept: application/json

### 5. Estimation rapide - Course longue nuit aller simple
GET {{baseUrl}}/estimation-rapide?distance_km=25&aller_retour=false&minutes_attente=3
Accept: application/json

### 6. Calcul d√©taill√© - Course standard jour
POST {{baseUrl}}/calculer-tarif
Content-Type: application/json

{
  "distance_km": 12.5,
  "minutes_attente": 5.0,
  "aller_retour": true,
  "date_heure_depart": "2025-09-24T14:30:00"
}

### 7. Calcul d√©taill√© - Course nuit weekend (tarif √©lev√©)
POST {{baseUrl}}/calculer-tarif
Content-Type: application/json

{
  "distance_km": 18.0,
  "minutes_attente": 2.0,
  "aller_retour": false,
  "date_heure_depart": "2025-09-28T23:15:00"
}

### 8. Test tarif minimum (course tr√®s courte)
POST {{baseUrl}}/calculer-tarif
Content-Type: application/json

{
  "distance_km": 1.5,
  "minutes_attente": 1.0,
  "aller_retour": true,
  "date_heure_depart": "2025-09-24T10:00:00"
}

### 9. Course dimanche apr√®s-midi (tarif major√©)
POST {{baseUrl}}/calculer-tarif
Content-Type: application/json

{
  "distance_km": 15.0,
  "minutes_attente": 4.0,
  "aller_retour": false,
  "date_heure_depart": "2025-09-28T16:30:00"
}

### 10. Test validation - Distance n√©gative (erreur 400 attendue)
POST {{baseUrl}}/calculer-tarif
Content-Type: application/json

{
  "distance_km": -5.0,
  "minutes_attente": 0,
  "aller_retour": false
}

### 11. Test validation - Minutes d'attente n√©gatives (erreur attendue)
POST {{baseUrl}}/calculer-tarif
Content-Type: application/json

{
  "distance_km": 10.0,
  "minutes_attente": -2.0,
  "aller_retour": true
}

### 12. Test endpoint inexistant (erreur 404 attendue)
GET {{baseUrl}}/endpoint-inexistant
Accept: application/json

### 13. Test rapide estimation (mesurer le temps de r√©ponse)
GET {{baseUrl}}/estimation-rapide?distance_km=10&aller_retour=true
Accept: application/json

### 14. Test calcul complexe (mesurer le temps de r√©ponse)
POST {{baseUrl}}/calculer-tarif
Content-Type: application/json

{
  "distance_km": 50.0,
  "minutes_attente": 10.0,
  "aller_retour": true,
  "date_heure_depart": "2025-09-28T02:30:00"
}

### 15. Test CORS avec Origin
GET {{baseUrl}}/verifier-sante
Accept: application/json
Origin: https://mon-site-client.com

### 16. Test avec User-Agent personnalis√©
GET {{baseUrl}}/tarifs
Accept: application/json
User-Agent: TaxiApp/1.0 (Test Client)


### 17. Sc√©nario r√©el 1: Client demande estimation puis calcul d√©taill√©
GET {{baseUrl}}/estimation-rapide?distance_km=8.5&aller_retour=false

###

POST {{baseUrl}}/calculer-tarif
Content-Type: application/json

{
  "distance_km": 8.5,
  "minutes_attente": 2.0,
  "aller_retour": false,
  "date_heure_depart": "2025-09-24T19:45:00"
}

###

### 18. Sc√©nario r√©el 2: Consultation des tarifs puis calcul weekend
GET {{baseUrl}}/tarifs

###

POST {{baseUrl}}/calculer-tarif
Content-Type: application/json

{
  "distance_km": 22.0,
  "minutes_attente": 7.0,
  "aller_retour": true,
  "date_heure_depart": "2025-09-29T14:00:00"
}

###

### ===============================================
### üìä NOTES ET M√âTRIQUES √Ä SURVEILLER
### ===============================================

# üîç Points √† v√©rifier :
# - Temps de r√©veil < 30s pour le premier appel
# - Temps de r√©ponse < 2s pour les appels suivants
# - Codes de statut corrects (200, 400, 404)
# - Formats JSON valides
# - Calculs math√©matiques corrects
# - Gestion des erreurs appropri√©e
# - Headers CORS si n√©cessaire

# üìà M√©triques de performance attendues :
# - /verifier-sante : < 500ms
# - /tarifs : < 500ms
# - /estimation-rapide : < 1s
# - /calculer-tarif : < 1.5s

###